<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">Aeq</span>,<span class="var type1" id="S3T2U4">beq</span>,<span class="var type1" id="S4T3U5">Aiq</span>,<span class="var type1" id="S5T4U6">biq</span>,<span class="var type1" id="S6T5U7">H</span>,<span class="var type1" id="S7T6U8">f</span>] = temp_MPC3DFootV97_form_Step0(<span class="var type1" id="S8T7U11">states</span>,<span class="var type1" id="S9T8U12">Nodes</span>,<span class="var type1" id="S10T9U13">r</span>,<span class="var type1" id="S11T10U14">qo</span>,<span class="var type1" id="S12T11U15">states_ref</span>,<span class="var type1" id="S13T12U16">MPC_index</span>,<span class="var type1" id="S14T13U17">weights</span>,<span class="var type1" id="S15T7U18">foot_info</span>,<span class="var type1" id="S16T14U19">foot_obs_info</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%TEMP_MPC_FORM Summary of this function goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3">  3</a></span><span class="line"><span class="comment">%   Detailed explanation goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4">  4</a></span><span class="line"><span class="comment">%   This function formulates all the matrices for MPC QP</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5">  5</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6">  6</a></span><span class="line"><span class="comment">%   states: current robot states, include CoM states and foot placement</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7">  7</a></span><span class="line"><span class="comment">%   Nodes: Number of nodes in MPC prediction</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8">  8</a></span><span class="line"><span class="comment">%   r: radius for obstacle avoidance</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9">  9</a></span><span class="line"><span class="comment">%   qo: obstacle states</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10"> 10</a></span><span class="line"><span class="comment">%   states_ref: desired robot states</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11"> 11</a></span><span class="line"><span class="comment">%   MPC_index : left/right step index, contact sequence index</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12"> 12</a></span><span class="line"><span class="comment">%   weights   : weight in the MPC cost function</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13"> 13</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14"> 14</a></span><span class="line"><span class="comment">% unpack inputs</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15"> 15</a></span><span class="line"><span class="mxinfo " id="T12:U16"><span class="var type1" id="S17T12U22">CoM_x</span> = <span class="mxinfo " id="T12:U18"><span class="var type1" id="S8T7U24">states</span>(<span class="mxinfo " id="T15:U20">1:2</span>,<span class="mxinfo " id="T16:U21">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16"> 16</a></span><span class="line"><span class="mxinfo " id="T12:U22"><span class="var type1" id="S18T12U31">CoM_y</span> = <span class="mxinfo " id="T12:U24"><span class="var type1" id="S8T7U33">states</span>(<span class="mxinfo " id="T15:U26">3:4</span>,<span class="mxinfo " id="T16:U27">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17"> 17</a></span><span class="line"><span class="mxinfo " id="T12:U28"><span class="var type1" id="S19T12U40">CoM_z</span> = <span class="mxinfo " id="T12:U30"><span class="var type1" id="S8T7U42">states</span>(<span class="mxinfo " id="T15:U32">7:8</span>,<span class="mxinfo " id="T16:U33">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18"> 18</a></span><span class="line"><span class="mxinfo " id="T8:U34"><span class="var type1" id="S20T8U49">CP_x</span> = <span class="mxinfo " id="T8:U36"><span class="var type1" id="S8T7U51">states</span>(<span class="mxinfo " id="T16:U38">5</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19"> 19</a></span><span class="line"><span class="mxinfo " id="T8:U39"><span class="var type1" id="S21T8U55">CP_y</span> = <span class="mxinfo " id="T8:U41"><span class="var type1" id="S8T7U57">states</span>(<span class="mxinfo " id="T16:U43">6</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20"> 20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21"> 21</a></span><span class="line"><span class="mxinfo " id="T12:U44"><span class="var type1" id="S22T12U61">x_ref</span> = <span class="mxinfo " id="T12:U46"><span class="var type1" id="S12T11U63">states_ref</span>(<span class="mxinfo " id="T17:U48"><span class="mxinfo " id="T8:U49">1</span>:<span class="mxinfo " id="T8:U50">2</span></span>,<span class="mxinfo " id="T8:U51">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22"> 22</a></span><span class="line"><span class="mxinfo " id="T12:U52"><span class="var type1" id="S23T12U70">y_ref</span> = <span class="mxinfo " id="T12:U54"><span class="var type1" id="S12T11U72">states_ref</span>(<span class="mxinfo " id="T17:U56"><span class="mxinfo " id="T8:U57">3</span>:<span class="mxinfo " id="T8:U58">4</span></span>,<span class="mxinfo " id="T8:U59">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23"> 23</a></span><span class="line"><span class="mxinfo " id="T12:U60"><span class="var type1" id="S24T12U79">z_ref</span> = <span class="mxinfo " id="T12:U62"><span class="var type1" id="S12T11U81">states_ref</span>(<span class="mxinfo " id="T17:U64"><span class="mxinfo " id="T8:U65">5</span>:<span class="mxinfo " id="T8:U66">6</span></span>,<span class="mxinfo " id="T8:U67">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24"> 24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25"> 25</a></span><span class="line"><span class="mxinfo " id="T12:U68"><span class="var type1" id="S22T12U88">x_ref</span> = <span class="mxinfo " id="T12:U70"><span class="var type1" id="S12T11U90">states_ref</span>(<span class="mxinfo " id="T15:U72">1:2</span>,<span class="mxinfo " id="T16:U73">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26"> 26</a></span><span class="line"><span class="mxinfo " id="T12:U74"><span class="var type1" id="S23T12U97">y_ref</span> = <span class="mxinfo " id="T12:U76"><span class="var type1" id="S12T11U99">states_ref</span>(<span class="mxinfo " id="T15:U78">3:4</span>,<span class="mxinfo " id="T16:U79">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27"> 27</a></span><span class="line"><span class="mxinfo " id="T12:U80"><span class="var type1" id="S24T12U106">z_ref</span> = <span class="mxinfo " id="T12:U82"><span class="var type1" id="S12T11U108">states_ref</span>(<span class="mxinfo " id="T15:U84">5:6</span>,<span class="mxinfo " id="T16:U85">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28"> 28</a></span><span class="line"><span class="mxinfo " id="T8:U86"><span class="var type1" id="S25T8U115">zh</span> = <span class="mxinfo " id="T8:U88"><span class="var type1" id="S12T11U117">states_ref</span>(<span class="mxinfo " id="T16:U90">7</span>,<span class="mxinfo " id="T16:U91">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29"> 29</a></span><span class="line"><span class="mxinfo " id="T18:U92"><span class="var type1" id="S26T18U122">x_traj</span> = <span class="mxinfo " id="T18:U94"><span class="mxinfo " id="T19:U95"><span class="var type1" id="S12T11U125">states_ref</span>(<span class="mxinfo " id="T20:U97">8:24</span>,<span class="mxinfo " id="T16:U98">1</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30"> 30</a></span><span class="line"><span class="mxinfo " id="T18:U99"><span class="var type1" id="S27T18U132">y_traj</span> = <span class="mxinfo " id="T18:U101"><span class="mxinfo " id="T19:U102"><span class="var type1" id="S12T11U135">states_ref</span>(<span class="mxinfo " id="T20:U104">25:41</span>,<span class="mxinfo " id="T16:U105">1</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31"> 31</a></span><span class="line"><span class="mxinfo " id="T18:U106"><span class="var type1" id="S28T18U142">z_traj</span> = <span class="mxinfo " id="T18:U108"><span class="mxinfo " id="T19:U109"><span class="var type1" id="S12T11U145">states_ref</span>(<span class="mxinfo " id="T20:U111">42:58</span>,<span class="mxinfo " id="T16:U112">1</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32"> 32</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33"> 33</a></span><span class="line"><span class="mxinfo " id="T8:U113"><span class="var type1" id="S29T8U152">r_min</span>  = <span class="mxinfo " id="T8:U115"><span class="var type1" id="S10T9U154">r</span>(<span class="mxinfo " id="T16:U117">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34"> 34</a></span><span class="line"><span class="mxinfo " id="T8:U118"><span class="var type1" id="S30T8U158">r_min2</span> = <span class="mxinfo " id="T8:U120"><span class="var type1" id="S10T9U160">r</span>(<span class="mxinfo " id="T16:U122">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35"> 35</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36"> 36</a></span><span class="line"><span class="mxinfo " id="T8:U123"><span class="var type1" id="S31T8U164">step_index</span> = <span class="mxinfo " id="T8:U125"><span class="var type1" id="S13T12U166">MPC_index</span>(<span class="mxinfo " id="T16:U127">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37"> 37</a></span><span class="line"><span class="mxinfo " id="T8:U128"><span class="var type1" id="S32T8U170">con_index</span>  = <span class="mxinfo " id="T8:U130"><span class="var type1" id="S13T12U172">MPC_index</span>(<span class="mxinfo " id="T8:U132">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38"> 38</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39"> 39</a></span><span class="line"><span class="mxinfo " id="T8:U133"><span class="var type1" id="S33T8U176">ob_cost</span> = <span class="mxinfo " id="T8:U135"><span class="var type1" id="S14T13U178">weights</span>(<span class="mxinfo " id="T16:U137">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40"> 40</a></span><span class="line"><span class="mxinfo " id="T12:U138"><span class="var type1" id="S34T12U182">Qx</span> = <span class="mxinfo " id="T12:U140"><span class="var type1" id="S14T13U184">weights</span>(<span class="mxinfo " id="T21:U142">2:3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41"> 41</a></span><span class="line"><span class="mxinfo " id="T12:U143"><span class="var type1" id="S35T12U190">Qy</span> = <span class="mxinfo " id="T12:U145"><span class="var type1" id="S14T13U192">weights</span>(<span class="mxinfo " id="T21:U147">4:5</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42"> 42</a></span><span class="line"><span class="mxinfo " id="T8:U148"><span class="var type1" id="S36T8U198">cRx</span> = <span class="mxinfo " id="T8:U150"><span class="var type1" id="S14T13U200">weights</span>(<span class="mxinfo " id="T16:U152">6</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43"> 43</a></span><span class="line"><span class="mxinfo " id="T8:U153"><span class="var type1" id="S37T8U204">cRy</span> = <span class="mxinfo " id="T8:U155"><span class="var type1" id="S14T13U206">weights</span>(<span class="mxinfo " id="T16:U157">7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44"> 44</a></span><span class="line"><span class="mxinfo " id="T8:U158"><span class="var type1" id="S38T8U210">cWx</span> = <span class="mxinfo " id="T8:U160"><span class="var type1" id="S14T13U212">weights</span>(<span class="mxinfo " id="T16:U162">8</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45"> 45</a></span><span class="line"><span class="mxinfo " id="T8:U163"><span class="var type1" id="S39T8U216">cWy</span> = <span class="mxinfo " id="T8:U165"><span class="var type1" id="S14T13U218">weights</span>(<span class="mxinfo " id="T16:U167">9</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46"> 46</a></span><span class="line"><span class="mxinfo " id="T12:U168"><span class="var type1" id="S40T12U222">Qz</span> = <span class="mxinfo " id="T12:U170"><span class="var type1" id="S14T13U224">weights</span>(<span class="mxinfo " id="T21:U172">10:11</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47"> 47</a></span><span class="line"><span class="mxinfo " id="T8:U173"><span class="var type1" id="S41T8U230">cRz</span> = <span class="mxinfo " id="T8:U175"><span class="var type1" id="S14T13U232">weights</span>(<span class="mxinfo " id="T16:U177">12</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48"> 48</a></span><span class="line"><span class="mxinfo " id="T9:U178"><span class="var type1" id="S42T9U236">p2</span> = <span class="mxinfo " id="T9:U180"><span class="var type1" id="S14T13U238">weights</span>(<span class="mxinfo " id="T22:U182">13:16</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49"> 49</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50"> 50</a></span><span class="line"><span class="mxinfo " id="T10:U183"><span class="var type1" id="S43T10U244">ftx</span> = <span class="mxinfo " id="T10:U185"><span class="var type1" id="S15T7U246">foot_info</span>(<span class="mxinfo " id="T23:U187">1:3</span>,<span class="mxinfo " id="T16:U188">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51"> 51</a></span><span class="line"><span class="mxinfo " id="T10:U189"><span class="var type1" id="S44T10U253">fty</span> = <span class="mxinfo " id="T10:U191"><span class="var type1" id="S15T7U255">foot_info</span>(<span class="mxinfo " id="T23:U193">4:6</span>,<span class="mxinfo " id="T16:U194">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52"> 52</a></span><span class="line"><span class="mxinfo " id="T12:U195"><span class="var type1" id="S45T12U262">d_foot</span> = <span class="mxinfo " id="T12:U197"><span class="var type1" id="S15T7U264">foot_info</span>(<span class="mxinfo " id="T15:U199">7:8</span>,<span class="mxinfo " id="T16:U200">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53"> 53</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54"> 54</a></span><span class="line"><span class="mxinfo " id="T24:U201"><span class="var type1" id="S46T24U271">r1</span> = <span class="mxinfo " id="T24:U203">[<span class="mxinfo " id="T25:U204"><span class="var type1" id="S29T8U275">r_min</span>.*<span class="mxinfo " id="T25:U206">ones(<span class="mxinfo " id="T8:U207">1</span>,<span class="var type1" id="S9T8U279">Nodes</span>)</span></span>;<span class="mxinfo " id="T25:U209"><span class="mxinfo " id="T8:U210"><span class="var type1" id="S10T9U283">r</span>(<span class="mxinfo " id="T16:U212">3</span>)</span>*<span class="mxinfo " id="T25:U213">ones(<span class="mxinfo " id="T8:U214">1</span>,<span class="var type1" id="S9T8U288">Nodes</span>)</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55"> 55</a></span><span class="line"><span class="mxinfo " id="T24:U216"><span class="var type1" id="S48T24U291">r2</span> = <span class="mxinfo " id="T24:U218">[<span class="mxinfo " id="T25:U219"><span class="var type1" id="S30T8U295">r_min2</span>.*<span class="mxinfo " id="T25:U221">ones(<span class="mxinfo " id="T8:U222">1</span>,<span class="var type1" id="S9T8U299">Nodes</span>)</span></span>;<span class="mxinfo " id="T25:U224"><span class="mxinfo " id="T8:U225"><span class="var type1" id="S10T9U303">r</span>(<span class="mxinfo " id="T16:U227">4</span>)</span>*<span class="mxinfo " id="T25:U228">ones(<span class="mxinfo " id="T8:U229">1</span>,<span class="var type1" id="S9T8U308">Nodes</span>)</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56"> 56</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57"> 57</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58"> 58</a></span><span class="line"><span class="mxinfo " id="T26:U231"><span class="var type1" id="S49T26U311">foot_ic</span> = <span class="mxinfo " id="T26:U233"><span class="var type1" id="S16T14U313">foot_obs_info</span>(<span class="mxinfo " id="T27:U235">1:7</span>,<span class="mxinfo " id="T16:U236">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59"> 59</a></span><span class="line"><span class="mxinfo " id="T28:U237"><span class="var type1" id="S50T28U320">fobs_ic</span> = <span class="mxinfo " id="T28:U239"><span class="var type1" id="S16T14U322">foot_obs_info</span>(<span class="mxinfo " id="T29:U241">8:22</span>,<span class="mxinfo " id="T16:U242">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60"> 60</a></span><span class="line"><span class="mxinfo " id="T8:U243"><span class="var type1" id="S51T8U329">step_height</span> = <span class="mxinfo " id="T8:U245"><span class="var type1" id="S16T14U331">foot_obs_info</span>(<span class="mxinfo " id="T16:U247">23</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61"> 61</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62"> 62</a></span><span class="line"><span class="mxinfo " id="T30:U248"><span class="var type1" id="S52T30U335">x_foot_traj</span> = <span class="mxinfo " id="T30:U250"><span class="mxinfo " id="T31:U251">linspace(<span class="mxinfo " id="T8:U252"><span class="var type1" id="S49T26U340">foot_ic</span>(<span class="mxinfo " id="T16:U254">4</span>)</span>,<span class="mxinfo " id="T8:U255"><span class="var type1" id="S49T26U343">foot_ic</span>(<span class="mxinfo " id="T16:U257">6</span>)</span>,5)</span>.'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63"> 63</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T32:U258"><span class="var type1" id="S31T8U349">step_index</span> == <span class="mxinfo " id="T8:U260">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64"> 64</a></span><span class="line">    <span class="mxinfo " id="T30:U261"><span class="var type1" id="S54T30U353">y_foot_traj</span> = <span class="mxinfo " id="T30:U263"><span class="mxinfo " id="T31:U264">linspace(<span class="mxinfo " id="T8:U265"><span class="var type1" id="S49T26U358">foot_ic</span>(<span class="mxinfo " id="T16:U267">5</span>)</span>,<span class="mxinfo " id="T8:U268"><span class="var type1" id="S49T26U361">foot_ic</span>(<span class="mxinfo " id="T16:U270">7</span>)</span>,5)</span>.'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65"> 65</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66"> 66</a></span><span class="line">    <span class="mxinfo " id="T30:U271"><span class="var type1" id="S54T30U367">y_foot_traj</span> = <span class="mxinfo " id="T30:U273"><span class="mxinfo " id="T31:U274">linspace(<span class="mxinfo " id="T8:U275"><span class="var type1" id="S49T26U372">foot_ic</span>(<span class="mxinfo " id="T16:U277">5</span>)</span>,<span class="mxinfo " id="T8:U278"><span class="var type1" id="S49T26U375">foot_ic</span>(<span class="mxinfo " id="T16:U280">7</span>)</span>,5)</span>.'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67"> 67</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68"> 68</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69"> 69</a></span><span class="line"><span class="mxinfo " id="T30:U281"><span class="var type1" id="S55T30U380">z_foot_traj</span> = <span class="mxinfo " id="T30:U283">[<span class="mxinfo " id="T8:U284">0</span>;<span class="mxinfo " id="T8:U285"><span class="var type1" id="S51T8U386">step_height</span>/<span class="mxinfo " id="T8:U287">2</span></span>;<span class="var type1" id="S51T8U389">step_height</span>;<span class="mxinfo " id="T8:U289"><span class="var type1" id="S51T8U392">step_height</span>/<span class="mxinfo " id="T8:U291">2</span></span>;<span class="mxinfo " id="T8:U292">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70"> 70</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71"> 71</a></span><span class="line"><span class="mxinfo " id="T33:U293"><span class="var type1" id="S56T33U398">eq_in</span> = <span class="mxinfo " id="T33:U295">[<span class="var type1" id="S20T8U401">CP_x</span>;<span class="var type1" id="S21T8U403">CP_y</span>;<span class="var type1" id="S49T26U405">foot_ic</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72"> 72</a></span><span class="line"><span class="mxinfo " id="T34:U299"><span class="var type1" id="S57T34U408">iq_in</span> = <span class="mxinfo " id="T34:U301">[<span class="var type1" id="S50T28U411">fobs_ic</span>;<span class="var type1" id="S52T30U413">x_foot_traj</span>;<span class="var type1" id="S54T30U415">y_foot_traj</span>;<span class="var type1" id="S55T30U417">z_foot_traj</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73"> 73</a></span><span class="line"><span class="mxinfo " id="T35:U306"><span class="var type1" id="S58T35U420">obj_in</span> = <span class="mxinfo " id="T35:U308">[<span class="var type1" id="S42T9U423">p2</span>;<span class="var type1" id="S52T30U425">x_foot_traj</span>;<span class="var type1" id="S54T30U427">y_foot_traj</span>;<span class="var type1" id="S55T30U429">z_foot_traj</span>;<span class="var type1" id="S49T26U431">foot_ic</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74"> 74</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75"> 75</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76"> 76</a></span><span class="line"><span class="comment">% [Aeq,beq] = EqualityConstraints_LeftStartV4(CoM_x,CoM_y);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77"> 77</a></span><span class="line"><span class="comment">% [Aiq,biq] = InequalityConstraints_LeftStartV4(CoM_x, CoM_y, qo, r1, r2, ob_cost ,CP_x,CP_y,foot_dis);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78"> 78</a></span><span class="line"><span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79"> 79</a></span><span class="line"><span class="comment">% % Develop The Objective Function Matrix and Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80"> 80</a></span><span class="line"><span class="comment">% [H,f] = ObjectiveFunction_LeftStart0V4(CP_x,CP_y,vel_des(1), vel_des(2),Qx,Qy,cRx,cRy,cWx,cWy);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81"> 81</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82"> 82</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T32:U314"><span class="var type1" id="S31T8U435">step_index</span> == <span class="mxinfo " id="T8:U316">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,83" id="srcline83"> 83</a></span><span class="line">    <span class="comment">% Develop the Constraints Matrix and Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,84" id="srcline84"> 84</a></span><span class="line">    [<span class="var type1" id="S2T1U440">Aeq</span>,<span class="var type1" id="S3T2U441">beq</span>] = <span class="fcn" id="F66N2:B443">Eq_LeftStart03DFootV97</span>(<span class="var type1" id="S17T12U444">CoM_x</span>,<span class="var type1" id="S18T12U445">CoM_y</span>, <span class="var type1" id="S19T12U446">CoM_z</span>, <span class="var type1" id="S25T8U447">zh</span>,<span class="var type1" id="S44T10U448">fty</span>, <span class="var type1" id="S56T33U449">eq_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,85" id="srcline85"> 85</a></span><span class="line">    [<span class="var type1" id="S4T3U453">Aiq</span>,<span class="var type1" id="S5T4U454">biq</span>] = <span class="fcn" id="F90N4:B456">Iq_LeftStart03DFootV97</span>(<span class="var type1" id="S17T12U457">CoM_x</span>, <span class="var type1" id="S18T12U458">CoM_y</span>,<span class="var type1" id="S19T12U459">CoM_z</span>,<span class="var type1" id="S26T18U460">x_traj</span>,<span class="var type1" id="S27T18U461">y_traj</span>,<span class="var type1" id="S28T18U462">z_traj</span>, <span class="var type1" id="S11T10U463">qo</span>, <span class="var type1" id="S46T24U464">r1</span>, <span class="var type1" id="S48T24U465">r2</span> ,<span class="var type1" id="S20T8U466">CP_x</span>,<span class="var type1" id="S21T8U467">CP_y</span>,<span class="var type1" id="S43T10U468">ftx</span>,<span class="var type1" id="S44T10U469">fty</span>,<span class="var type1" id="S45T12U470">d_foot</span>, <span class="var type1" id="S57T34U471">iq_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86"> 86</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87"> 87</a></span><span class="line">    <span class="comment">% Develop The Objective Function Matrix and Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88"> 88</a></span><span class="line">    [<span class="var type1" id="S6T5U475">H</span>,<span class="var type1" id="S7T6U476">f</span>] = <span class="fcn" id="F95N6:B478">Obj_LeftStart03DFootV97</span>(<span class="var type1" id="S20T8U479">CP_x</span>,<span class="var type1" id="S21T8U480">CP_y</span>,<span class="var type1" id="S22T12U481">x_ref</span>, <span class="var type1" id="S23T12U482">y_ref</span>,<span class="var type1" id="S24T12U483">z_ref</span>, <span class="var type1" id="S34T12U484">Qx</span>,<span class="var type1" id="S35T12U485">Qy</span>,<span class="var type1" id="S40T12U486">Qz</span>,<span class="var type1" id="S36T8U487">cRx</span>,<span class="var type1" id="S37T8U488">cRy</span>,<span class="var type1" id="S41T8U489">cRz</span>,<span class="var type1" id="S38T8U490">cWx</span>,<span class="var type1" id="S39T8U491">cWy</span>, <span class="var type1" id="S33T8U492">ob_cost</span>, <span class="var type1" id="S43T10U493">ftx</span>, <span class="var type1" id="S58T35U494">obj_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89"> 89</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,90" id="srcline90"> 90</a></span><span class="line">    <span class="comment">% Develop the Constraints Matrix and Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,91" id="srcline91"> 91</a></span><span class="line">    [<span class="var type1" id="S2T1U499">Aeq</span>,<span class="var type1" id="S3T2U500">beq</span>] = <span class="fcn" id="F96N3:B502">Eq_RightStart03DFootV97</span>(<span class="var type1" id="S17T12U503">CoM_x</span>,<span class="var type1" id="S18T12U504">CoM_y</span>, <span class="var type1" id="S19T12U505">CoM_z</span>, <span class="var type1" id="S25T8U506">zh</span>,<span class="var type1" id="S44T10U507">fty</span>, <span class="var type1" id="S56T33U508">eq_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,92" id="srcline92"> 92</a></span><span class="line">    [<span class="var type1" id="S4T3U512">Aiq</span>,<span class="var type1" id="S5T4U513">biq</span>] = <span class="fcn" id="F97N5:B515">Iq_RightStart03DFootV97</span>(<span class="var type1" id="S17T12U516">CoM_x</span>, <span class="var type1" id="S18T12U517">CoM_y</span>, <span class="var type1" id="S19T12U518">CoM_z</span>,<span class="var type1" id="S26T18U519">x_traj</span>,<span class="var type1" id="S27T18U520">y_traj</span>,<span class="var type1" id="S28T18U521">z_traj</span>, <span class="var type1" id="S11T10U522">qo</span>, <span class="var type1" id="S46T24U523">r1</span>, <span class="var type1" id="S48T24U524">r2</span>, <span class="var type1" id="S20T8U525">CP_x</span>,<span class="var type1" id="S21T8U526">CP_y</span>,<span class="var type1" id="S43T10U527">ftx</span>,<span class="var type1" id="S44T10U528">fty</span>,<span class="var type1" id="S45T12U529">d_foot</span>, <span class="var type1" id="S57T34U530">iq_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,93" id="srcline93"> 93</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,94" id="srcline94"> 94</a></span><span class="line">    <span class="comment">% Develop The Objective Function Matrix and Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,95" id="srcline95"> 95</a></span><span class="line">    [<span class="var type1" id="S6T5U534">H</span>,<span class="var type1" id="S7T6U535">f</span>] = <span class="fcn" id="F98N7:B537">Obj_RightStart03DFootV97</span>(<span class="var type1" id="S20T8U538">CP_x</span>,<span class="var type1" id="S21T8U539">CP_y</span>,<span class="var type1" id="S22T12U540">x_ref</span>, <span class="var type1" id="S23T12U541">y_ref</span>,<span class="var type1" id="S24T12U542">z_ref</span>,<span class="var type1" id="S34T12U543">Qx</span>,<span class="var type1" id="S35T12U544">Qy</span>,<span class="var type1" id="S40T12U545">Qz</span>,<span class="var type1" id="S36T8U546">cRx</span>,<span class="var type1" id="S37T8U547">cRy</span>,<span class="var type1" id="S41T8U548">cRz</span>,<span class="var type1" id="S38T8U549">cWx</span>,<span class="var type1" id="S39T8U550">cWy</span>,<span class="var type1" id="S33T8U551">ob_cost</span>, <span class="var type1" id="S43T10U552">ftx</span>, <span class="var type1" id="S58T35U553">obj_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,96" id="srcline96"> 96</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,97" id="srcline97"> 97</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,98" id="srcline98"> 98</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,99" id="srcline99"> 99</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,100" id="srcline100">100</a></span><span class="line"></span></span>
</pre>
</body>
</html>
