<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">Aeq</span>,<span class="var type1" id="S3T2U4">beq</span>,<span class="var type1" id="S4T3U5">Aiq</span>,<span class="var type1" id="S5T4U6">biq</span>,<span class="var type1" id="S6T5U7">H</span>,<span class="var type1" id="S7T6U8">f</span>] = temp_MPC3DFootV97_form_Step1(<span class="var type1" id="S8T7U11">states</span>,<span class="var type1" id="S9T8U12">Nodes</span>,<span class="var type1" id="S10T9U13">r</span>,<span class="var type1" id="S11T10U14">qo</span>,<span class="var type1" id="S12T11U15">states_ref</span>,<span class="var type1" id="S13T12U16">MPC_index</span>,<span class="var type1" id="S14T13U17">weights</span>,<span class="var type1" id="S15T7U18">foot_info</span>,<span class="var type1" id="S16T14U19">foot_obs_info</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%TEMP_MPC_FORM Summary of this function goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%   Detailed explanation goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%   This function formulates all the matrices for MPC QP</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%   states: current robot states, include CoM states and foot placement</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%   Nodes: Number of nodes in MPC prediction</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%   r: radius for obstacle avoidance</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%   qo: obstacle states</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="comment">%   states_ref: desired robot states</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="comment">%   MPC_index : left/right step index, contact sequence index</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="comment">%   weights   : weight in the MPC cost function</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"><span class="comment">% unpack inputs</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo " id="T12:U16"><span class="var type1" id="S17T12U22">CoM_x</span> = <span class="mxinfo " id="T12:U18"><span class="var type1" id="S8T7U24">states</span>(<span class="mxinfo " id="T15:U20">1:2</span>,<span class="mxinfo " id="T16:U21">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo " id="T12:U22"><span class="var type1" id="S18T12U31">CoM_y</span> = <span class="mxinfo " id="T12:U24"><span class="var type1" id="S8T7U33">states</span>(<span class="mxinfo " id="T15:U26">3:4</span>,<span class="mxinfo " id="T16:U27">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo " id="T12:U28"><span class="var type1" id="S19T12U40">CoM_z</span> = <span class="mxinfo " id="T12:U30"><span class="var type1" id="S8T7U42">states</span>(<span class="mxinfo " id="T15:U32">7:8</span>,<span class="mxinfo " id="T16:U33">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo " id="T8:U34"><span class="var type1" id="S20T8U49">CP_x</span> = <span class="mxinfo " id="T8:U36"><span class="var type1" id="S8T7U51">states</span>(<span class="mxinfo " id="T16:U38">5</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo " id="T8:U39"><span class="var type1" id="S21T8U55">CP_y</span> = <span class="mxinfo " id="T8:U41"><span class="var type1" id="S8T7U57">states</span>(<span class="mxinfo " id="T16:U43">6</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo " id="T12:U44"><span class="var type1" id="S22T12U61">x_ref</span> = <span class="mxinfo " id="T12:U46"><span class="var type1" id="S12T11U63">states_ref</span>(<span class="mxinfo " id="T15:U48">1:2</span>,<span class="mxinfo " id="T16:U49">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo " id="T12:U50"><span class="var type1" id="S23T12U70">y_ref</span> = <span class="mxinfo " id="T12:U52"><span class="var type1" id="S12T11U72">states_ref</span>(<span class="mxinfo " id="T15:U54">3:4</span>,<span class="mxinfo " id="T16:U55">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo " id="T12:U56"><span class="var type1" id="S24T12U79">z_ref</span> = <span class="mxinfo " id="T12:U58"><span class="var type1" id="S12T11U81">states_ref</span>(<span class="mxinfo " id="T15:U60">5:6</span>,<span class="mxinfo " id="T16:U61">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="mxinfo " id="T8:U62"><span class="var type1" id="S25T8U88">zh</span> = <span class="mxinfo " id="T8:U64"><span class="var type1" id="S12T11U90">states_ref</span>(<span class="mxinfo " id="T16:U66">7</span>,<span class="mxinfo " id="T16:U67">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line"><span class="mxinfo " id="T17:U68"><span class="var type1" id="S26T17U95">x_traj</span> = <span class="mxinfo " id="T17:U70"><span class="mxinfo " id="T18:U71"><span class="var type1" id="S12T11U98">states_ref</span>(<span class="mxinfo " id="T19:U73">8:24</span>,<span class="mxinfo " id="T16:U74">1</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line"><span class="mxinfo " id="T17:U75"><span class="var type1" id="S27T17U105">y_traj</span> = <span class="mxinfo " id="T17:U77"><span class="mxinfo " id="T18:U78"><span class="var type1" id="S12T11U108">states_ref</span>(<span class="mxinfo " id="T19:U80">25:41</span>,<span class="mxinfo " id="T16:U81">1</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line"><span class="mxinfo " id="T17:U82"><span class="var type1" id="S28T17U115">z_traj</span> = <span class="mxinfo " id="T17:U84"><span class="mxinfo " id="T18:U85"><span class="var type1" id="S12T11U118">states_ref</span>(<span class="mxinfo " id="T19:U87">42:58</span>,<span class="mxinfo " id="T16:U88">1</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line"><span class="mxinfo " id="T8:U89"><span class="var type1" id="S29T8U125">r_min</span>  = <span class="mxinfo " id="T8:U91"><span class="var type1" id="S10T9U127">r</span>(<span class="mxinfo " id="T16:U93">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"><span class="mxinfo " id="T8:U94"><span class="var type1" id="S30T8U131">r_min2</span> = <span class="mxinfo " id="T8:U96"><span class="var type1" id="S10T9U133">r</span>(<span class="mxinfo " id="T16:U98">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line"><span class="mxinfo " id="T8:U99"><span class="var type1" id="S31T8U137">step_index</span> = <span class="mxinfo " id="T8:U101"><span class="var type1" id="S13T12U139">MPC_index</span>(<span class="mxinfo " id="T16:U103">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line"><span class="mxinfo " id="T8:U104"><span class="var type1" id="S32T8U143">con_index</span>  = <span class="mxinfo " id="T8:U106"><span class="var type1" id="S13T12U145">MPC_index</span>(<span class="mxinfo " id="T8:U108">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35">35</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36">36</a></span><span class="line"><span class="mxinfo " id="T8:U109"><span class="var type1" id="S33T8U149">ob_cost</span> = <span class="mxinfo " id="T8:U111"><span class="var type1" id="S14T13U151">weights</span>(<span class="mxinfo " id="T16:U113">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37">37</a></span><span class="line"><span class="mxinfo " id="T12:U114"><span class="var type1" id="S34T12U155">Qx</span> = <span class="mxinfo " id="T12:U116"><span class="var type1" id="S14T13U157">weights</span>(<span class="mxinfo " id="T20:U118">2:3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38">38</a></span><span class="line"><span class="mxinfo " id="T12:U119"><span class="var type1" id="S35T12U163">Qy</span> = <span class="mxinfo " id="T12:U121"><span class="var type1" id="S14T13U165">weights</span>(<span class="mxinfo " id="T20:U123">4:5</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39">39</a></span><span class="line"><span class="mxinfo " id="T8:U124"><span class="var type1" id="S36T8U171">cRx</span> = <span class="mxinfo " id="T8:U126"><span class="var type1" id="S14T13U173">weights</span>(<span class="mxinfo " id="T16:U128">6</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40">40</a></span><span class="line"><span class="mxinfo " id="T8:U129"><span class="var type1" id="S37T8U177">cRy</span> = <span class="mxinfo " id="T8:U131"><span class="var type1" id="S14T13U179">weights</span>(<span class="mxinfo " id="T16:U133">7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41">41</a></span><span class="line"><span class="mxinfo " id="T8:U134"><span class="var type1" id="S38T8U183">cWx</span> = <span class="mxinfo " id="T8:U136"><span class="var type1" id="S14T13U185">weights</span>(<span class="mxinfo " id="T16:U138">8</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42">42</a></span><span class="line"><span class="mxinfo " id="T8:U139"><span class="var type1" id="S39T8U189">cWy</span> = <span class="mxinfo " id="T8:U141"><span class="var type1" id="S14T13U191">weights</span>(<span class="mxinfo " id="T16:U143">9</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43">43</a></span><span class="line"><span class="mxinfo " id="T12:U144"><span class="var type1" id="S40T12U195">Qz</span> = <span class="mxinfo " id="T12:U146"><span class="var type1" id="S14T13U197">weights</span>(<span class="mxinfo " id="T20:U148">10:11</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44">44</a></span><span class="line"><span class="mxinfo " id="T8:U149"><span class="var type1" id="S41T8U203">cRz</span> = <span class="mxinfo " id="T8:U151"><span class="var type1" id="S14T13U205">weights</span>(<span class="mxinfo " id="T16:U153">12</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45">45</a></span><span class="line"><span class="mxinfo " id="T9:U154"><span class="var type1" id="S42T9U209">p2</span> = <span class="mxinfo " id="T9:U156"><span class="var type1" id="S14T13U211">weights</span>(<span class="mxinfo " id="T21:U158">13:16</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46">46</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47">47</a></span><span class="line"><span class="mxinfo " id="T10:U159"><span class="var type1" id="S43T10U217">ftx</span> = <span class="mxinfo " id="T10:U161"><span class="var type1" id="S15T7U219">foot_info</span>(<span class="mxinfo " id="T22:U163">1:3</span>,<span class="mxinfo " id="T16:U164">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48">48</a></span><span class="line"><span class="mxinfo " id="T10:U165"><span class="var type1" id="S44T10U226">fty</span> = <span class="mxinfo " id="T10:U167"><span class="var type1" id="S15T7U228">foot_info</span>(<span class="mxinfo " id="T22:U169">4:6</span>,<span class="mxinfo " id="T16:U170">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49">49</a></span><span class="line"><span class="mxinfo " id="T12:U171"><span class="var type1" id="S45T12U235">d_foot</span> = <span class="mxinfo " id="T12:U173"><span class="var type1" id="S15T7U237">foot_info</span>(<span class="mxinfo " id="T15:U175">7:8</span>,<span class="mxinfo " id="T16:U176">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50">50</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51">51</a></span><span class="line"><span class="mxinfo " id="T23:U177"><span class="var type1" id="S46T23U244">r1</span> = <span class="mxinfo " id="T23:U179">[<span class="mxinfo " id="T24:U180"><span class="var type1" id="S29T8U248">r_min</span>.*<span class="mxinfo " id="T24:U182">ones(<span class="mxinfo " id="T8:U183">1</span>,<span class="var type1" id="S9T8U252">Nodes</span>)</span></span>;<span class="mxinfo " id="T24:U185"><span class="mxinfo " id="T8:U186"><span class="var type1" id="S10T9U256">r</span>(<span class="mxinfo " id="T16:U188">3</span>)</span>*<span class="mxinfo " id="T24:U189">ones(<span class="mxinfo " id="T8:U190">1</span>,<span class="var type1" id="S9T8U261">Nodes</span>)</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52">52</a></span><span class="line"><span class="mxinfo " id="T23:U192"><span class="var type1" id="S48T23U264">r2</span> = <span class="mxinfo " id="T23:U194">[<span class="mxinfo " id="T24:U195"><span class="var type1" id="S30T8U268">r_min2</span>.*<span class="mxinfo " id="T24:U197">ones(<span class="mxinfo " id="T8:U198">1</span>,<span class="var type1" id="S9T8U272">Nodes</span>)</span></span>;<span class="mxinfo " id="T24:U200"><span class="mxinfo " id="T8:U201"><span class="var type1" id="S10T9U276">r</span>(<span class="mxinfo " id="T16:U203">4</span>)</span>*<span class="mxinfo " id="T24:U204">ones(<span class="mxinfo " id="T8:U205">1</span>,<span class="var type1" id="S9T8U281">Nodes</span>)</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53">53</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54">54</a></span><span class="line"><span class="mxinfo " id="T25:U207"><span class="var type1" id="S49T25U284">foot_ic</span> = <span class="mxinfo " id="T25:U209"><span class="var type1" id="S16T14U286">foot_obs_info</span>(<span class="mxinfo " id="T26:U211">1:7</span>,<span class="mxinfo " id="T16:U212">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55">55</a></span><span class="line"><span class="mxinfo " id="T27:U213"><span class="var type1" id="S50T27U293">fobs_ic</span> = <span class="mxinfo " id="T27:U215"><span class="var type1" id="S16T14U295">foot_obs_info</span>(<span class="mxinfo " id="T28:U217">8:22</span>,<span class="mxinfo " id="T16:U218">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56">56</a></span><span class="line"><span class="mxinfo " id="T8:U219"><span class="var type1" id="S51T8U302">step_height</span> = <span class="mxinfo " id="T8:U221"><span class="var type1" id="S16T14U304">foot_obs_info</span>(<span class="mxinfo " id="T16:U223">23</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57">57</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line"><span class="mxinfo " id="T29:U224"><span class="var type1" id="S52T29U308">x_foot_traj</span> = <span class="mxinfo " id="T29:U226"><span class="mxinfo " id="T30:U227">linspace(<span class="mxinfo " id="T8:U228"><span class="var type1" id="S49T25U313">foot_ic</span>(<span class="mxinfo " id="T16:U230">4</span>)</span>,<span class="mxinfo " id="T8:U231"><span class="var type1" id="S49T25U316">foot_ic</span>(<span class="mxinfo " id="T16:U233">6</span>)</span>,5)</span>.'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T31:U234"><span class="var type1" id="S31T8U322">step_index</span> == <span class="mxinfo " id="T8:U236">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line">    <span class="mxinfo " id="T29:U237"><span class="var type1" id="S54T29U326">y_foot_traj</span> = <span class="mxinfo " id="T29:U239"><span class="mxinfo " id="T30:U240">linspace(<span class="mxinfo " id="T8:U241"><span class="var type1" id="S49T25U331">foot_ic</span>(<span class="mxinfo " id="T16:U243">5</span>)</span>,<span class="mxinfo " id="T8:U244"><span class="var type1" id="S49T25U334">foot_ic</span>(<span class="mxinfo " id="T16:U246">7</span>)</span>,5)</span>.'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line">    <span class="mxinfo " id="T29:U247"><span class="var type1" id="S54T29U340">y_foot_traj</span> = <span class="mxinfo " id="T29:U249"><span class="mxinfo " id="T30:U250">linspace(<span class="mxinfo " id="T8:U251"><span class="var type1" id="S49T25U345">foot_ic</span>(<span class="mxinfo " id="T16:U253">5</span>)</span>,<span class="mxinfo " id="T8:U254"><span class="var type1" id="S49T25U348">foot_ic</span>(<span class="mxinfo " id="T16:U256">7</span>)</span>,5)</span>.'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66">66</a></span><span class="line"><span class="mxinfo " id="T29:U257"><span class="var type1" id="S55T29U353">z_foot_traj</span> = <span class="mxinfo " id="T29:U259">[<span class="mxinfo " id="T8:U260">0</span>;<span class="mxinfo " id="T8:U261"><span class="var type1" id="S51T8U359">step_height</span>/<span class="mxinfo " id="T8:U263">2</span></span>;<span class="var type1" id="S51T8U362">step_height</span>;<span class="mxinfo " id="T8:U265"><span class="var type1" id="S51T8U365">step_height</span>/<span class="mxinfo " id="T8:U267">2</span></span>;<span class="mxinfo " id="T8:U268">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67">67</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68">68</a></span><span class="line"><span class="mxinfo " id="T32:U269"><span class="var type1" id="S56T32U371">eq_in</span> = <span class="mxinfo " id="T32:U271">[<span class="var type1" id="S20T8U374">CP_x</span>;<span class="var type1" id="S21T8U376">CP_y</span>;<span class="var type1" id="S49T25U378">foot_ic</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69">69</a></span><span class="line"><span class="mxinfo " id="T33:U275"><span class="var type1" id="S57T33U381">iq_in</span> = <span class="mxinfo " id="T33:U277">[<span class="var type1" id="S50T27U384">fobs_ic</span>;<span class="var type1" id="S52T29U386">x_foot_traj</span>;<span class="var type1" id="S54T29U388">y_foot_traj</span>;<span class="var type1" id="S55T29U390">z_foot_traj</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70">70</a></span><span class="line"><span class="mxinfo " id="T34:U282"><span class="var type1" id="S58T34U393">obj_in</span> = <span class="mxinfo " id="T34:U284">[<span class="var type1" id="S42T9U396">p2</span>;<span class="var type1" id="S52T29U398">x_foot_traj</span>;<span class="var type1" id="S54T29U400">y_foot_traj</span>;<span class="var type1" id="S55T29U402">z_foot_traj</span>;<span class="var type1" id="S49T25U404">foot_ic</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71">71</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72">72</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73">73</a></span><span class="line"><span class="comment">% [Aeq,beq] = EqualityConstraints_LeftStartV4(CoM_x,CoM_y);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74">74</a></span><span class="line"><span class="comment">% [Aiq,biq] = InequalityConstraints_LeftStartV4(CoM_x, CoM_y, qo, r1, r2, ob_cost ,CP_x,CP_y,foot_dis);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75">75</a></span><span class="line"><span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76">76</a></span><span class="line"><span class="comment">% % Develop The Objective Function Matrix and Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77">77</a></span><span class="line"><span class="comment">% [H,f] = ObjectiveFunction_LeftStart0V4(CP_x,CP_y,vel_des(1), vel_des(2),Qx,Qy,cRx,cRy,cWx,cWy);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78">78</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79">79</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T31:U290"><span class="var type1" id="S31T8U408">step_index</span> == <span class="mxinfo " id="T8:U292">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80">80</a></span><span class="line">    <span class="comment">% Develop the Constraints Matrix and Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81">81</a></span><span class="line">    [<span class="var type1" id="S2T1U413">Aeq</span>,<span class="var type1" id="S3T2U414">beq</span>] = <span class="fcn" id="F66N2:B416">Eq_LeftStart13DFootV97</span>(<span class="var type1" id="S17T12U417">CoM_x</span>,<span class="var type1" id="S18T12U418">CoM_y</span>, <span class="var type1" id="S19T12U419">CoM_z</span>,<span class="var type1" id="S25T8U420">zh</span>,<span class="var type1" id="S44T10U421">fty</span>, <span class="var type1" id="S56T32U422">eq_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82">82</a></span><span class="line">    [<span class="var type1" id="S4T3U426">Aiq</span>,<span class="var type1" id="S5T4U427">biq</span>] = <span class="fcn" id="F90N4:B429">Iq_LeftStart13DFootV97</span>(<span class="var type1" id="S17T12U430">CoM_x</span>, <span class="var type1" id="S18T12U431">CoM_y</span>, <span class="var type1" id="S19T12U432">CoM_z</span>,<span class="var type1" id="S26T17U433">x_traj</span>,<span class="var type1" id="S27T17U434">y_traj</span>,<span class="var type1" id="S28T17U435">z_traj</span>, <span class="var type1" id="S11T10U436">qo</span>, <span class="var type1" id="S46T23U437">r1</span>, <span class="var type1" id="S48T23U438">r2</span> ,<span class="var type1" id="S20T8U439">CP_x</span>,<span class="var type1" id="S21T8U440">CP_y</span>,<span class="var type1" id="S43T10U441">ftx</span>,<span class="var type1" id="S44T10U442">fty</span>,<span class="var type1" id="S45T12U443">d_foot</span>, <span class="var type1" id="S57T33U444">iq_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,83" id="srcline83">83</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,84" id="srcline84">84</a></span><span class="line">    <span class="comment">% Develop The Objective Function Matrix and Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,85" id="srcline85">85</a></span><span class="line">    [<span class="var type1" id="S6T5U448">H</span>,<span class="var type1" id="S7T6U449">f</span>] = <span class="fcn" id="F95N6:B451">Obj_LeftStart13DFootV97</span>(<span class="var type1" id="S20T8U452">CP_x</span>,<span class="var type1" id="S21T8U453">CP_y</span>,<span class="var type1" id="S22T12U454">x_ref</span>, <span class="var type1" id="S23T12U455">y_ref</span>,<span class="var type1" id="S24T12U456">z_ref</span>,<span class="var type1" id="S34T12U457">Qx</span>,<span class="var type1" id="S35T12U458">Qy</span>,<span class="var type1" id="S40T12U459">Qz</span>,<span class="var type1" id="S36T8U460">cRx</span>,<span class="var type1" id="S37T8U461">cRy</span>,<span class="var type1" id="S41T8U462">cRz</span>,<span class="var type1" id="S38T8U463">cWx</span>,<span class="var type1" id="S39T8U464">cWy</span>, <span class="var type1" id="S33T8U465">ob_cost</span>, <span class="var type1" id="S43T10U466">ftx</span>,<span class="var type1" id="S58T34U467">obj_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86">86</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87">87</a></span><span class="line">    <span class="comment">% Develop the Constraints Matrix and Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88">88</a></span><span class="line">    [<span class="var type1" id="S2T1U472">Aeq</span>,<span class="var type1" id="S3T2U473">beq</span>] = <span class="fcn" id="F96N3:B475">Eq_RightStart13DFootV97</span>(<span class="var type1" id="S17T12U476">CoM_x</span>,<span class="var type1" id="S18T12U477">CoM_y</span>, <span class="var type1" id="S19T12U478">CoM_z</span>,<span class="var type1" id="S25T8U479">zh</span>,<span class="var type1" id="S44T10U480">fty</span>, <span class="var type1" id="S56T32U481">eq_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89">89</a></span><span class="line">    [<span class="var type1" id="S4T3U485">Aiq</span>,<span class="var type1" id="S5T4U486">biq</span>] = <span class="fcn" id="F97N5:B488">Iq_RightStart13DFootV97</span>(<span class="var type1" id="S17T12U489">CoM_x</span>, <span class="var type1" id="S18T12U490">CoM_y</span>, <span class="var type1" id="S19T12U491">CoM_z</span>,<span class="var type1" id="S26T17U492">x_traj</span>,<span class="var type1" id="S27T17U493">y_traj</span>,<span class="var type1" id="S28T17U494">z_traj</span>, <span class="var type1" id="S11T10U495">qo</span>, <span class="var type1" id="S46T23U496">r1</span>, <span class="var type1" id="S48T23U497">r2</span>, <span class="var type1" id="S20T8U498">CP_x</span>,<span class="var type1" id="S21T8U499">CP_y</span>,<span class="var type1" id="S43T10U500">ftx</span>,<span class="var type1" id="S44T10U501">fty</span>,<span class="var type1" id="S45T12U502">d_foot</span>, <span class="var type1" id="S57T33U503">iq_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,90" id="srcline90">90</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,91" id="srcline91">91</a></span><span class="line">    <span class="comment">% Develop The Objective Function Matrix and Vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,92" id="srcline92">92</a></span><span class="line">    [<span class="var type1" id="S6T5U507">H</span>,<span class="var type1" id="S7T6U508">f</span>] = <span class="fcn" id="F98N7:B510">Obj_RightStart13DFootV97</span>(<span class="var type1" id="S20T8U511">CP_x</span>,<span class="var type1" id="S21T8U512">CP_y</span>,<span class="var type1" id="S22T12U513">x_ref</span>, <span class="var type1" id="S23T12U514">y_ref</span>,<span class="var type1" id="S24T12U515">z_ref</span>,<span class="var type1" id="S34T12U516">Qx</span>,<span class="var type1" id="S35T12U517">Qy</span>,<span class="var type1" id="S40T12U518">Qz</span>,<span class="var type1" id="S36T8U519">cRx</span>,<span class="var type1" id="S37T8U520">cRy</span>,<span class="var type1" id="S41T8U521">cRz</span>,<span class="var type1" id="S38T8U522">cWx</span>,<span class="var type1" id="S39T8U523">cWy</span>, <span class="var type1" id="S33T8U524">ob_cost</span>, <span class="var type1" id="S43T10U525">ftx</span>,<span class="var type1" id="S58T34U526">obj_in</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,93" id="srcline93">93</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,94" id="srcline94">94</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,95" id="srcline95">95</a></span><span class="line"></span></span>
</pre>
</body>
</html>
